---
project: potato

steps:
    - cd "$TONIXXX_SYNC"
    - cmake .
    - cmake --build . --target lint
    - cmake --build . --config Release
    - CTEST_OUTPUT_ON_FAILURE=1 ctest -C Release
    - cmake --build . --target leaks

outputdirectory: bin

recipes:
    - label: freebsd-amd64
      box: mcandre/potato-buildbot-freebsd
    # - label: linux-glibc-2.17-amd64
    #   box: mcandre/potato-buildbot-centos
    #   steps:
    #       - cd "$TONIXXX_SYNC"
    #       - cmake3 .
    #       - cmake3 --build . --target lint
    #       - cmake3 --build . --config Release
    #       - CTEST_OUTPUT_ON_FAILURE=1 ctest3 -C Release
    #       - cmake3 --build . --target leaks
    # - label: linux-glibc-2.24-amd64
    #   box: mcandre/potato-buildbot-debian-amd64
    # # D has segfaults in Debian/i386
    # # - label: linux-glibc-2.24-i386
    # #   box: mcandre/fewer-buildbot-debian-i386
    # - label: macos-amd64
    #   box: mcandre/potato-buildbot-macos
    # - label: windows-amd64
    #   guesttype: Cygwin
    #   box: mcandre/potato-buildbot-windows-amd64
    # - label: windows-i386
    #   guesttype: Cygwin
    #   box: mcandre/potato-buildbot-windows-i386
