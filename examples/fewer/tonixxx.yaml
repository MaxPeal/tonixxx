steps:
  - cmake . && make test drmemory
  - mkdir -p "$TONIXXX_ARTIFACTS"
  - cp bin/* "$TONIXXX_ARTIFACTS"

recipes:
  - name: gnu-linux-amd64
    base: mcandre/fewer-buildbot-debian
  # - name: gnu-linux-i386
  #   base: mcandre/fewer-buildbot-debian-i386
  # - name: musl-linux-amd64
  #   base: mcandre/fewer-buildbot-alpine
  # - name: uclibc-linux-amd64
  #   base: mcandre/fewer-buildbot-busybox
  - name: darwin-amd64
    base: mcandre/fewer-buildbot-macos
  # - name: freebsd-amd64
  #   base: mcandre/fewer-buildbot-freebsd
  # - name: dragonflybsd-amd64
  #   base: mcandre/fewer-buildbot-dragonflybsd
  # - name: solaris-i386
  #   base: mcandre/fewer-buildbot-dilos
  # - name: solaris-sparc
  #   base: mcandre/fewer-buildbot-dilos-sparc
  # - name: openbsd-amd64
  #   base: mcandre/fewer-buildbot-openbsd
  # - name: netbsd-amd64
  #   base: mcandre/fewer-buidlbot-netbsd
  # - name: minix-i386
  #   base: mcandre/fewer-buildbot-minix
  - name: windows-comspec-amd64
    base: mcandre/fewer-buildbot-windows
    type: COMSPEC
    steps:
      - cmake . & nmake lint test drmemory
      - md "%TONIXXX_ARTIFACTS%"
      - copy bin\* "%TONIXXX_ARTIFACTS%"
