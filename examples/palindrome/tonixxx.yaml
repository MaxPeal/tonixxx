---
project: "palindrome"

steps:
  - "cd \"$TONIXXX_SYNC\""
  - "cmake ."
  - "cmake --build . --target lint"
  - "cmake --build . --config Release"
  - "cmake --build . --target leaks"
  - "CTEST_OUTPUT_ON_FAILURE=1 ctest -C Release"

outputdirectory: "bin"

recipes:
  - label: "freebsd-amd64"
    box: "mcandre/palindrome-buildbot-freebsd"
  - label: "linux-glibc-2.17-amd64"
    box: "mcandre/palindrome-buildbot-centos"
    steps:
      - "cd \"$TONIXXX_SYNC\""
      - "cmake3 ."
      - "cmake3 --build . --target lint"
      - "cmake3 --build . --config Release"
      - "cmake3 --build . --target leaks"
      - "CTEST_OUTPUT_ON_FAILURE=1 ctest3 -C Release"
  - label: "linux-glibc-2.24-amd64"
    box: "mcandre/palindrome-buildbot-debian-amd64"
  - label: "macos-amd64"
    box: "mcandre/palindrome-buildbot-macos"
  - label: "windows-amd64"
    guesttype: "Cygwin"
    box: "mcandre/palindrome-buildbot-windows-amd64"
